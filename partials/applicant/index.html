<style type="text/css">
.div-remarks a {
    cursor: pointer;
}
</style>

<!-- start: Content -->
<div id="content">
    <div class="col-md-12" style="padding:20px;">
        <div class="col-md-12 padding-0">
            <div class="panel box-shadow-none content-header">
                <div class="panel-body">
                    <div class="col-md-8">
                        <h3 class="animated fadeInLeft" style="font-weight:bold;">{{ applicant.first_name }} {{applicant.middle_name}} {{ applicant.last_name }}</h3>
                        <p class="animated fadeInDown breadcrumbs">
                            <a href="#/dashboard">Home</a> <span class="fa-angle-right fa"></span> 
                            <a href="#/candidates/list">Candidate</a> <span class="fa-angle-right fa"></span> 
                            {{ applicant.first_name }} {{applicant.middle_name}} {{ applicant.last_name }}
                        </p>
                    </div>
                    <div style="text-align:right;">
                        <!-- <a href="#/report/candidates">
                            <button class=" btn btn-circle btn-outline btn-warning" value="primary" data-toggle="tooltip" data-placement="top" title="BACK">
                                <span class="fa fa-mail-reply"></span>
                            </button>
                        </a> -->

                        <!-- <a>
                            <button class=" btn btn-circle btn-outline btn-danger" value="primary" data-toggle="tooltip" data-placement="top" title="DELETE">
                                <span class="fa fa-trash"></span>
                            </button>
                        </a> -->

                        
                        <!-- <button class=" btn btn-circle btn-outline btn-primary" value="primary" data-toggle="tooltip" data-placement="top" title="UPDATE STATUS" ng-click="update_status()">
                            <span class="fa fa-save"></span>
                        </button> -->
                        
                    </div>
                </div>
            </div>
            <div class="col-md-8 padding-0">
                <div class="panel">
                    <div class="panel-body">
                        <table class="table table-striped table-bordered" style="width:100%;">
                            <tbody>
                                <tr>
                                    <td colspan="2">
                                        <textarea ng-model="post" cols="50" rows="5" class="form-control ng-pristine ng-touched input-boxes ng-invalid ng-invalid-required ng-valid-maxlength" placeholder="Enter you remarks here"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" style="text-align:right;">
                                        <input type="button" class="btn btn-sm btn-primary" value="Save Remarks" ng-click="save_remarks()" ng-disabled="!post">
                                    </td>
                                </tr>
                                <tr class="edit-form" style="color:#2196f3;">
                                    <td class="col-md-3" style="font-weight:bold;">Applicant ID</td>
                                    <td class="col-md-5">
                                        <span>
                                            <b>CHRS-{{applicant.applicant_id}}</b>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Profiled for</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.job_position.text" >
                                            {{applicant.job_position}}

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('job_position')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.job_position.input">
                                            <div
                                                isteven-multi-select
                                                input-model="data.jobpositions"
                                                output-model="form.job_position"
                                                button-label="icon name"
                                                item-label="icon name maker"
                                                tick-property="ticked"
                                                selection-mode="single"
                                                style="width:295px; float:left;"
                                                max-height="200px"
                                            >
                                            </div>

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('job_position')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('job_position')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Client</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.client.text">
                                            {{applicant.client}}

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('client')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.client.input">
                                            <div
                                                isteven-multi-select
                                                input-model="data.clients"
                                                output-model="form.client"
                                                button-label="icon name"
                                                item-label="icon name maker"
                                                tick-property="ticked"
                                                selection-mode="single"
                                                style="width:295px; float:left;"
                                                max-height="200px"
                                            >
                                            </div>

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('client')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('client')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Status</td>
                                    <td class="col-md-5" ng-show="permissions.Candidates.Functions.Status">
                                        <span ng-if="restriction.status.edit">
                                            <div
                                                isteven-multi-select
                                                input-model="data.statuses"
                                                output-model="form.status"
                                                button-label="icon name"
                                                item-label="icon name maker"
                                                tick-property="ticked"
                                                selection-mode="single"
                                                style="width:295px; float:left;"
                                                max-height="200px"
                                            >
                                            </div>
                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="update_status('status')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>
                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('status')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                        <span ng-if="restriction.status.text">
                                            {{form.status}}
                                        </span>
                                    </td>
                                    <td ng-show="!permissions.Candidates.Functions.Status">
                                        {{form.status[0].name}}
                                    </td>
                                </tr>
                                <tr class="edit-form" ng-show="permissions.Candidates.Functions.Date_endorsement">
                                    <td class="col-md-3">Date of Endorsement</td>
                                    <td class="col-md-5" colspan="2">
                                        
                                        <input id="formedits_date_endorsed" type="text" maxlength="50" class="form-text" data-ng-model="form.date_endorsed" ng-change="clearerror('date_endorsed')" style="width:100px;" />
                                        
                                        <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('date_endorsed')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>
                                        <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('date_endorsed')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                    </td>
                                </tr>
                                <tr class="edit-form" ng-show="permissions.Candidates.Functions.Date_appointment">
                                    <td class="col-md-3">Date of Appointment</td>
                                    <td class="col-md-5" colspan="2">

                                        <input id="formedits_appointment_date" type="text" maxlength="50" class="form-text" data-ng-model="form.date_appointment" ng-change="clearerror('date_appointment')" style="width:100px;" />

                                        <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('date_appointment')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>
                                        <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('date_appointment')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                    </td>
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-body">
                        <table class="table table-striped table-bordered" style="width:100%;">
                            <tbody>
                                <tr class="edit-form">
                                    <td class="col-md-3">Requisition ID</td>
                                    <td class="col-md-5">
                                        <span>
                                            {{applicant.requisition_id}}
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Requisition</td>
                                    <td class="col-md-5">

                                        <span>
                                            {{applicant.requisition}} ({{applicant.requisition_job_position}})
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Date Received</td>
                                    <td class="col-md-5">

                                        <span ng-show="display.date_received.text">
                                            {{applicant.date_received}} {{applicant.time_received }}


                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('date_received')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.date_received.input">
                                            <input id="formedit_datereceived" style="width:160px;" type="text" maxlength="50" data-ng-model="form.date_received" />

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('date_received')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('date_received')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>

                                        
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Source</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.source.text">
                                            {{applicant.source}}

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('source')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.source.input">
                                            <!-- <select id="form_source" data-ng-model="form.source_id" data-ng-change="sources_changed()" style="width:350px;">
                                                <option ng-repeat="(k, v) in data.sources" value="{{v.pk}}">{{ v.source }}</option>
                                            </select> -->
                                            <div
                                                isteven-multi-select
                                                input-model="data.sources"
                                                output-model="form.source"
                                                button-label="icon name"
                                                item-label="icon name maker"
                                                tick-property="ticked"
                                                selection-mode="single"
                                                style="width:295px; float:left;"
                                                max-height="200px"
                                            >
                                            </div>

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('source')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('source')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Candidate Name</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.name.text">
                                            {{applicant.first_name}} {{applicant.middle_name}} {{applicant.last_name}}

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('name')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.name.input">
                                            <table>
                                                <tr>
                                                    <td>Last Name: </td>
                                                    <td><input style="width:160px;" type="text" maxlength="50" data-ng-model="form.last_name" /></td>
                                                </tr>
                                                <tr>
                                                    <td>First Name:</td>
                                                    <td><input style="width:160px;" type="text" maxlength="50" data-ng-model="form.first_name" /></td>
                                                </tr>
                                                <tr>
                                                    <td>Middle Name:</td>
                                                    <td><input style="width:160px;" type="text" maxlength="50" data-ng-model="form.middle_name" /></td>
                                                </tr>
                                            </table>

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('name')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('name')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Birth Date</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.birthdate.text">
                                            {{applicant.birthdate}}

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('birthdate')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.birthdate.input">
                                            <input id="formedit_birthdate" class="mask-placeholder" style="width:160px;" type="text" maxlength="50" data-ng-model="form.birthdate" />

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('birthdate')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('birthdate')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Mobile Number</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.contact_number.text">
                                            {{applicant.contact_number}}

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('contact_number')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.contact_number.input">
                                            <input id="formedit_datereceived" class="mask-phone" style="width:160px;" type="text" maxlength="50" data-ng-model="form.contact_number" />

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('contact_number')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('contact_number')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Email Address</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.email_address.text">
                                            {{applicant.email_address}}

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('email_address')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.email_address.input">
                                            <input style="width:160px;" type="text" maxlength="50" data-ng-model="form.email_address" />

                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('email_address')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('email_address')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">CV</td>
                                    <td class="col-md-5">
                                        <span ng-show="display.cv.text && applicant.cv != 'null'">
                                            <a ng-click="download_cv(applicant.cv)" style="cursor:pointer;">Download</a>

                                            <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('cv')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                        </span>
                                        <span ng-show="display.cv.input || applicant.cv == 'null'">
                                            <div class="fileupload">
                                                <div class="left" style="width:300px;">
                                                    <input type="file" 
                                                        ngf-select 
                                                        ng-model="picFile" 
                                                        name="file"
                                                        ngf-pattern="'.pdf,.jpg,.doc,.docx,.odt'"
                                                        ngf-max-size="10MB" 
                                                        required
                                                        ngf-model-invalid="errorFiles"
                                                    >
                                                    <i ng-show="myForm.file.$error.maxSize">File too large 
                                                        {{errorFiles[0].size / 1000000|number:1}}MB: max 10M</i>
                                                    
                                                </div>
                                                <div class="right">
                                                    <input type="button" class="btn btn-info" value="UPLOAD" ng-click="uploadPic(picFile)" />
                                                    <span ng-show="picFile.result">Upload Successful</span>
                                                    <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
                                                </div>

                                                <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('cv')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                            </div>
                                        </span>
                                    </td>
                                </tr>
                                <tr class="edit-form">
                                    <td class="col-md-3">Talent Acquisition</td>
                                    <td class="col-md-5" ng-show="permissions.Candidates.Functions.Talent_acquisition">
                                        <span ng-show="display.talent_acquisition.text">
                                            {{applicant.talent_acquisition}}

                                            <span ng-if="restriction.talent_acquisition.edit">
                                                <span class="fa fa-pencil edit-button" style="margin-left:10px;" ng-click="edit_field('talent_acquisition')" data-toggle="tooltip" data-placement="right" title="Edit"></span>
                                            </span>
                                        </span>
                                        <span ng-show="display.talent_acquisition.input">
                                            <div
                                                isteven-multi-select
                                                input-model="data.talent_acquisitions"
                                                output-model="form.talent_acquisition"
                                                button-label="icon name"
                                                item-label="icon name maker"
                                                tick-property="ticked"
                                                selection-mode="single"
                                                style="width:295px; float:left;"
                                                max-height="200px"
                                            >
                                            </div>
                                            <span class="fa fa-save save-button" style="margin-left:10px;" ng-click="save_edit_field('talent_acquisition')" data-toggle="tooltip" data-placement="right" title="Save changes"></span>

                                            <span class="fa fa-mail-reply save-button" style="margin-left:10px;" ng-click="cancel_edit('talent_acquisition')" data-toggle="tooltip" data-placement="right" title="Revert changes"></span>
                                        </span>
                                    </td>
                                    <td ng-show="!permissions.Candidates.Functions.Talent_acquisition">
                                        {{applicant.talent_acquisition}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- <div style="width: 100%; height: 300px;"></div> -->
                </div>
            </div>
            <div class="col-md-4 div-remarks">
                <div class="panel">
                    <div class="panel-body">
                        <h3 style="margin-top:-5px;">Logs:</h3>
                        <table class="table table-striped table-bordered" style="width:100%;">
                            <tr ng-repeat="(k,v) in remarks">
                                <td>
                                    <div>
                                        {{v.details}}
                                    </div>
                                    <div style="color:#2196f3; font-size:10px; margin-top:5px;">
                                        {{v.name}} {{v.date_created}}
                                    </div>
                                </td>
                            </tr>
                            <tr ng-if="remarks_status">
                                <td><a ng-click="more_remarks()">more...</a></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            
        </div>
    </div>
</div>
<!-- end: content -->

<script type="text/javascript">
    $(document).ready(function(){
        $('#formedit_datereceived').bootstrapMaterialDatePicker({ format : 'YYYY-MM-DD HH:mm', animation:true });
        
        $('#formedit_birthdate').bootstrapMaterialDatePicker({ format : 'YYYY-MM-DD', time : false, animation:true });

        $('#formedits_date_endorsed').bootstrapMaterialDatePicker({ format : 'YYYY-MM-DD HH:mm', animation:true });
        $('#formedits_appointment_date').bootstrapMaterialDatePicker({ format : 'YYYY-MM-DD HH:mm', animation:true });

        $('.dtp-close').hide();

        $('.mask-placeholder').mask("0000-00-00", {placeholder: "YYYY-MM-DD"});
        $('.mask-phone').mask('0000-000-0000');

        // $("#form_source").select2({
        //     placeholder: "Select a Source",
        //     allowClear: false
        // });

        // $("#form_job_position").select2({
        //     placeholder: "Select a Job Position",
        //     allowClear: false
        // });

        // $("#form_client").select2({
        //     placeholder: "Select a Client",
        //     allowClear: false
        // });

        // $("#form_status").select2({
        //     placeholder: "Select a Status",
        //     allowClear: false
        // });

        // $("#form_talent_acquisition").select2({
        //     placeholder: "Select a Talent Acquisition",
        //     allowClear: false
        // });

        // $("#my-awesome-dropzone").dropzone({ url: "/file/post" });
    });
</script>
